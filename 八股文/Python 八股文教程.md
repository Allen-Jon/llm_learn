# Python核心面试

### **第一部分：数据类型与底层实现 (★★★★★)**

#### **1.1 列表与元组 **

- **Q1: (★★★★★)** 深入对比 `list` 和 `tuple`：除了可变性，它们在内存分配、缓存机制和性能上还有哪些差异？

- **Q2: (★★★★☆)** 列表的 `append` 和 `extend` 有何区别？`+` 操作符和 `extend` 在性能上有何差异？
- **Q3: (★★★★☆)** CPython 中 `list` 的动态数组是如何实现扩容的？其增长因子是多少，为何这样设计？
- **Q4: (★★★☆☆)** `list.sort()` 和 `sorted()` 函数的根本区别是什么？它们是稳定排序吗？
- **Q5: (★★★☆☆)** 如何高效地反转一个列表？

#### **1.2 字典与集合**

- **Q6: (★★★★★)** 剖析 `dict` 的底层实现：哈希冲突的解决方法是什么（开放寻址法）？`dict` 的扩容机制是怎样的？
- **Q7: (★★★★★)** Python 3.7+ 的字典是如何实现有序的？这种“紧凑字典”的实现方式对内存和性能有何具体影响？
- **Q8: (★★★★☆)** 为什么字典的键必须是可哈希的？如何让一个自定义类的实例变得可哈希？
- **Q9: (★★★★☆)** Python 中 `set` 的底层实现是什么？`add` 和 `remove` 操作的时间复杂度是多少？
- **Q10: (★★★☆☆)** `dict.keys()`, `dict.values()`, `dict.items()` 返回的是什么对象？它们与列表有何不同？
- **Q11: (★★★☆☆)** `collections.defaultdict` 和 `dict.setdefault()` 的使用场景和区别是什么？
- **Q12: (★★★☆☆)** `collections.OrderedDict` 在现代Python版本中还有使用价值吗？

#### **1.3 字符串**

- **Q13: (★★★★☆)** 什么是字符串驻留 (string interning) 机制？它对性能和内存有什么影响？
- **Q14: (★★★☆☆)** `f-string`, `str.format()`, `%` 操作符格式化字符串，三者在性能和用法上有何区别？
- **Q15: (★★★☆☆)** 如何高效地拼接大量字符串？为什么不推荐在循环中使用 `+` 操作？

#### **1.4 拷贝机制**

- **Q16: (★★★★★)** `b = a`，`b = a[:]`，`b = copy.copy(a)`，`b = copy.deepcopy(a)` 四者在处理嵌套可变对象时有何根本区别？
- **Q17: (★★★☆☆)** `copy.deepcopy` 是如何处理循环引用的？

### **第二部分：函数、闭包与装饰器 (★★★★★)**

- **Q18: (★★★★★)** 什么是闭包？闭包的三个要素是什么？如何解决在循环中创建闭包时的“延迟绑定”问题？
- **Q19: (★★★★★)** 手写一个能接收参数的装饰器，并解释其执行流程。
- **Q20: (★★★★★)** `functools.wraps` 在装饰器中的作用是什么？如果不用它会有什么具体问题？
- **Q21: (★★★★☆)** 深入解释 `nonlocal` 和 `global` 关键字的区别和使用场景。
- **Q22: (★★★★☆)** Python 的函数参数是如何传递的？（是值传递、引用传递还是共享传参/对象引用传递？）
- **Q23: (★★★★☆)** 如何实现一个类装饰器？它和函数装饰器有何不同？
- **Q24: (★★★☆☆)** `*args` 和 `**kwargs` 在函数定义和函数调用中有什么区别和用法？
- **Q25: (★★★☆☆)** `lambda` 表达式有什么优点和局限性？
- **Q26: (★★★☆☆)** 什么是偏函数 (Partial Function)？`functools.partial` 的应用场景是什么？
- **Q27: (★★★☆☆)** 函数注解 (Function Annotations) 的作用是什么？它在运行时有何影响？

### **第三部分：面向对象编程 (OOP) 深度剖析 (★★★★★)**

- **Q28: (★★★★★)** 什么是描述符 (Descriptor) 协议？`property`, `staticmethod`, `classmethod` 是如何基于描述符实现的？
- **Q29: (★★★★★)** 什么是元类 (Metaclass)？请解释一个实际的应用场景（如 ORM 或 API 框架）。
- **Q30: (★★★★★)** 深入解释 `__new__` 和 `__init__` 的区别。在什么场景下必须重写 `__new__`？
- **Q31: (★★★★☆)** Python 的方法解析顺序 (MRO) 是什么？C3 线性化算法是如何解决菱形继承问题的？
- **Q32: (★★★★☆)** Python 中 `super()` 的工作原理是什么？尤其是在多重继承中。
- **Q33: (★★★★☆)** `__getattr__` 和 `__getattribute__` 方法有什么核心区别和不同的应用场景？
- **Q34: (★★★★☆)** `__slots__` 的作用是什么？它的实现原理是什么？使用它会带来哪些实际的限制？
- **Q35: (★★★★☆)** 什么是抽象基类 (ABC)？它与“鸭子类型”是什么关系？
- **Q36: (★★★☆☆)** 如何在Python中优雅地实现单例模式？（至少说出三种方法）
- **Q37: (★★★☆☆)** `__` (双下划线) 引发的名称改写 (Name Mangling) 是为了解决什么问题？
- **Q38: (★★★☆☆)** Python 中的 Mixin 模式是什么？使用它有什么优缺点？
- **Q39: (★★★☆☆)** `__subclasshook__` 方法有什么用？
- **Q40: (★★★☆☆)** Python 操作符重载是如何通过魔法方法实现的？

### **第四部分：内存管理与执行模型 (★★★★★)**

- **Q41: (★★★★★)** 深入剖析 GIL (全局解释器锁)：它为何存在？它锁的是什么？为什么说它对 I/O 密集型任务影响不大？
- **Q42: (★★★★★)** Python 的垃圾回收机制是怎样的？详细说明引用计数、标记-清除和分代回收的原理以及它们如何协同工作。
- **Q43: (★★★★☆)** 解释 Python 代码的执行过程（从.py 文件到 PVM 执行.pyc 字节码）。
- **Q44: (★★★★☆)** `weakref` 模块的作用是什么？请举一个必须使用弱引用的例子（例如缓存、观察者模式）。
- **Q45: (★★★★☆)** 什么是 Python 的命名空间和作用域？LEGB 规则的具体查找顺序是怎样的？
- **Q46: (★★★☆☆)** 变量 `a=1` 和 `a=2`，`id(a)` 会变化吗？`a=[1]` 和 `a.append(2)`，`id(a)` 会变化吗？这背后体现了什么？
- **Q47: (★★★☆☆)** CPython 中小整数对象池和短字符串驻留是如何工作的？
- **Q48: (★★★☆☆)** 什么是 Python 的帧对象 (Frame Object)？如何访问它？
- **Q49: (★★★☆☆)** `sys.getrefcount()` 的返回值为什么通常比你预期的要大 1？

### **第五部分：迭代、生成与异步编程 (★★★★☆)**

- **Q50: (★★★★★)** 迭代器 (Iterator) 和可迭代对象 (Iterable) 的区别是什么？`for` 循环的工作原理是什么？
- **Q51: (★★★★★)** 生成器 (Generator) 是如何工作的？它相比普通函数返回列表有什么核心优势？
- **Q52: (★★★★☆)** `yield` 和 `yield from` 有什么本质区别？
- **Q53: (★★★★☆)** 什么是协程 (Coroutine)？它与线程的根本区别是什么？
- **Q54: (★★★★☆)** `asyncio` 的事件循环 (Event Loop) 是什么？它是如何调度协程的？
- **Q55: (★★★☆☆)** 列表推导式、集合推导式和生成器表达式在性能和内存使用上有何不同？
- **Q56: (★★★☆☆)** `async/await` 和 `yield from` 在底层实现上有什么联系？
- **Q57: (★★★☆☆)** `async for` 和 `async with` 是做什么用的？
- **Q58: (★★★☆☆)** `asyncio.Future` 和 `asyncio.Task` 的区别是什么？

### **第六部分：并发与并行 (★★★★☆)**

- **Q59: (★★★★★)** 多线程、多进程、协程三者的优缺点和适用场景分别是什么？（I/O密集型 vs CPU密集型）
- **Q60: (★★★★☆)** `multiprocessing` 模块中 `fork`, `spawn`, `forkserver` 三种启动方式有什么区别？
- **Q61: (★★★★☆)** `threading.Lock`, `RLock`, `Semaphore`, `Event` 的区别和使用场景是什么？
- **Q62: (★★★★☆)** `multiprocessing` 模块中的 `Queue` 和 `queue.Queue` 有什么区别？
- **Q63: (★★★☆☆)** `ThreadPoolExecutor` 和 `ProcessPoolExecutor` 有什么区别？如何选择？
- **Q64: (★★★☆☆)** 什么是守护线程/守护进程 (Daemon)？

### **第七部分：模块、包与异常处理 (★★★★☆)**

- **Q65: (★★★★☆)** 深入解释 Python 的导入系统 (`sys.path`, `sys.modules`, `finder`, `loader`)。
- **Q66: (★★★★☆)** 什么是循环导入？如何诊断并解决循环导入问题？（至少说出三种方法）
- **Q67: (★★★★☆)** `try...except...else...finally` 四个代码块的完整执行逻辑是怎样的？`else` 块有什么用？
- **Q68: (★★★☆☆)** `raise` 和 `raise from` 语句有什么区别？
- **Q69: (★★★☆☆)** `__init__.py` 文件有什么作用？`__all__` 变量是做什么用的？
- **Q70: (★★★☆☆)** 绝对导入和相对导入的区别是什么？
- **Q71: (★★★☆☆)** 常规包 (有`__init__.py`) 和命名空间包 (无`__init__.py`) 有什么区别和应用场景？
- **Q72: (★★★☆☆)** 如何设计一个健壮的自定义异常体系？

### **第八部分：标准库与常用模式 (★★★☆☆)**

- **Q73: (★★★★☆)** `itertools` 和 `functools` 模块中，你最常用的是哪几个函数？请举例说明其应用场景。
- **Q74: (★★★☆☆)** `re` 模块中 `match()`, `search()`, `findall()` 的区别是什么？
- **Q75: (★★★☆☆)** `with` 语句和上下文管理器协议是如何工作的？如何用生成器实现一个上下文管理器？
- **Q76: (★★★☆☆)** `datetime` 模块中 naive 和 aware datetime 对象有什么区别？如何正确处理时区问题？
- **Q77: (★★★☆☆)** `pathlib` 模块相比 `os.path` 有什么优势？
- **Q78: (★★★☆☆)** `logging` 模块的基本组件（Logger, Handler, Formatter, Filter）是什么？它们是如何协同工作的？
- **Q79: (★★★☆☆)** `pickle` 模块是做什么用的？它有什么安全风险？

### **第九部分：Python 内部与C API (高阶) (★★☆☆☆)**

- **Q80: (★★☆☆☆)** 什么是 `PyObject` 和 `PyVarObject`？它们在CPython内部是什么角色？
- **Q81: (★★☆☆☆)** 在C扩展中，如何正确地管理Python对象的引用计数？（`Py_INCREF`, `Py_DECREF`）
- **Q82: (★★☆☆☆)** CPython 的 GIL 在C代码层面是如何实现加锁和释放的？